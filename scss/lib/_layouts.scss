html, body { min-height: 100%; }

%full { @include fill-parent(); }

%half { @extend %full;
    @include media($medium-layout) { @include span-columns(3); }
    @include media($large-layout) { @include span-columns(6); }
}

%third { @extend %full;
    @include media($medium-layout) { @include span-columns(2); }
    @include media($large-layout) { @include span-columns(4); }
}

%quarter { @extend %full;
    @include media($large-layout) { @include span-columns(3); }
}

%article {
    @include outer-container;
    margin: 0 1.5em;
    @media screen and (min-width: 540px) { margin: 0 2em; }
    > header {
        @include fill-parent();
        margin: $base-vertical-rhythm/2 0;
        h1, h2 {
            font-weight: 400;
            margin-bottom: $base-vertical-rhythm/4; }
        h1 { @include font-sizing(1.25, 1); }
        h2 { @include font-sizing(0.75, 0.875); }
        
        @include media($medium-layout) {
            h1 { @include font-sizing(1.5, 1.25); }
            h2 { @include font-sizing(0.875, 1); } }
        @include media($large-layout) {
            h1 { @include font-sizing(1.875, 1.5); }
            h2 { @include font-sizing(1, 1); } }
    }
    summary { 
        margin: $base-vertical-rhythm 0 $base-vertical-rhythm/2;
        font-weight: 300;
        display: none;
        @include media($medium-layout) {
            display: block;
            margin: $base-vertical-rhythm/2 0;
            @include font-sizing(1.25, 1.2);
        }
        @include media($large-layout) { @include font-sizing(1.375, 1.25); }
    }
}

// A sidebar is full width on mobile, otherwise takes up 1/3 of the parent
%sidebar {
    @include fill-parent();
    @include media($medium-layout) {
        @include span-columns(2);
        @include pad(0 0 0 default);
    }
    @include media($large-layout) {
        @include span-columns(4);
    }
}

// A sidebar-adjacent section is full width on mobile,
// otherwise takes up 2/3 of parent
%sidebar-adjacent {
    @include fill-parent();
    @include media($medium-layout) { @include span-columns(4); }
    @include media($large-layout) { @include span-columns(8); }
}

$sidebar-menu-width: 25%;

.container, footer {
    width: 100% - $sidebar-menu-width;
    float: left;
}
#sidebar-menu {
    // overflow: hidden;
    position: fixed;
    top: 0;
    right: 0;
    width: $sidebar-menu-width;
    height: 100%;   
    .sidebar { height: 100%; overflow-y: auto; }
    // .sidebar::-webkit-scrollbar { display: none; }
}

@media screen and (min-width: 1024px) { 
    nav.primary ul.right { display: none; }
}

@media screen and (max-width: 540px) { 
    nav.primary ul.right { display: none; }
}

@media screen and (max-width: 1023px) {
    $menu-width: 75%;
    $animation: all 0.5s $ease-out-quint;
    .container, footer { width: 100%; }
    #sidebar-menu { width: $menu-width; margin-right: -$menu-width; }
    #right-menu-button { display: block; }
    #sidebar-menu:target {
        @include transition($animation);
        margin-right: 0;
        & ~ .container, & ~ .footer { 
            width: 100%;
            margin-left: -$menu-width;
            @include transition($animation);
        }
    }
    nav.primary ul.right { display: table; }
}

article%fullpage-article { @extend %article;
    > section { @include fill-parent(); }
    > aside { @include fill-parent(); }
}
article%sidebar-article { @extend %article;
    > section { @extend %sidebar-adjacent; }
    > aside { @extend %sidebar; }
}

.post { @extend %sidebar-article;
    p:first-of-type {
        @include media($medium-layout) { @include font-sizing(1.2, 1.25); }
        // @include media($large-layout) { @include font-sizing(1.3, 1.3); }
    } 
}
.question { @extend %sidebar-article; }
.request { @extend %sidebar-article; }
.jurisdiction { @extend %sidebar-article; }