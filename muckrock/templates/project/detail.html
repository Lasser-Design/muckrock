{% extends 'details/base_detail.html' %}

{% load tags %}

{% block type %}project{% endblock %}

{% block header %}
    {% if project.image %}
    <img src="{{ MEDIA_URL }}{{ project.image }}">
    {% endif %}
    <h1>{{ project.title }}</h1>
    <p>{{ project.description }}</p>
{% endblock %}

{% block aside %}
    {% if request.user.is_staff %}
    <div class="controls">
        <a href="{% url 'project-update' slug=project.slug id=project.id %}" class="update primary button">
            Update
        </a>
        <a href="{% url 'project-delete' slug=project.slug id=project.id %}" class="delete failure button">
            Delete
        </a>
    </div>
    {% endif %}
    {% if project.contributors.count > 0 %}
    <dfn>Contributors</dfn>
    <ul class="contributors">
    {% for contributor in project.contributors.all %}
        <li>{{ contributor.get_full_name }}</li>
    {% endfor %}
    </ul>
    {% endif %}
    {% if project.tags.count > 0 %}
    <dfn>Tags</dfn>
    <ul class="tags">
    {% for tag in project.tags.all %}
        <li class="tag">{{ tag.name }}</li>
    {% endfor %}
    </ul>
    {% endif %}
    {% include 'lib/social.html' with title=project.title %}
{% endblock %}

{% block main %}
{% if project.requests.count > 0 %}
<h2>Requests</h2>
<ul class="requests">
    {% for request in project.requests.all %}
    <li class="request">
        <a href="{{ request.get_absolute_url }}" title="{{ request.title }}">
            {{ request.title }}
        </a>
    </li>
    {% endfor %}
</ul>
{% endif %}
{% if project.articles.count > 0 %}
<h2>Articles</h2>
<ul class="articles">
    {% for article in project.articles.all %}
    <li class="article">
        <a href="{{ article.get_absolute_url }}" title="{{ article.title }}">
            {{ article.title }}
        </a>
    </li>
    {% endfor %}
</ul>
{% endif %}
{% endblock main %}
