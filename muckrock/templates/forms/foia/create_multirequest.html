{% extends 'forms/base_form.html' %}
{% block title %}MuckRock &bull; Create a multi-request{% endblock %}
{% block form-type %}multirequest-create{% endblock %}
{% block form-title %}Create a multi-request{% endblock form-title %}

{% load static from staticfiles %}

{% block scripts %}
<script src="{% static 'js/jquery.multiselect.js' %}" type="text/javascript"></script>
<script>
    var agencySearch = "<input type='text' class='search-input' id='agency-search' autocomplete='off' placeholder='Search for an agency'>";
    $('#id_agencies').multiSelect({
            selectableHeader: "<label>All Agencies</label>" + agencySearch,
            selectionHeader: "<label>Selected Agencies</label>",
    });
    $('#agency-search').keydown(function(key){
        var currentKey = (key >= 65 && key <= 90) ? String.fromCharCode(key) : '';
        var query = this.value + currentKey;
        $.ajax({
            method: 'GET',
            data: {'query': query},
            dataType: 'json',
            success: function(data, status, _){
                console.log(data);
            }
        });
    });
</script>
{% endblock scripts %}
