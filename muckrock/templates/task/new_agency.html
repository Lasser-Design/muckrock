{% extends 'task/default.html' %}

{% block task-class %}
    new-agency
{% endblock %}

{% block task-type %}
    New Agency
{% endblock %}

{% block task-data %}
<dl class="task-data">
    {% if task.agency %}
    <dt>Agency</dt>
    <dd><a href="{% url 'admin:agency_agency_change' task.agency.pk %}">{{task.agency}}</a></dd>
    {% endif %}
    {% if task.newagency.user %}
    <dt>User</dt>
    <dd><a href="{% url 'admin:auth_user_change' task.user.pk %}">{{task.user}}</a></dd>
    {% endif %}
</dl>
{% endblock %}

{% block task-actions %}
{% endblock %}

{% block task-extra-context %}
<div class="task-extra-context">
    <form method="POST" class="new-agency approval form">
    {% for field in agency_form %}
        <fieldset>
            <label for="{{field.id}}">{{field.label}}</label>
            <p class="help-text"><small>{{field.help_text}}</small></p>
            {{ field }}
        </fieldset>
    {% endfor %}
        <button type="submit" name="approve" value="true" class="success">Approve</button>
    </form>
    <form method="POST" class="new-agency rejection form">
        <label>Move this agencyâ€™s requests to</label>
        <select name="replacement_agency">
            {% for other_agency in other_agencies %}
            <option value="{{ other_agency.id }}">{{ other_agency.name }}</option>
            {% endfor %}
        </select>
        <button type="submit" name="reject" value="true" class="failure">Reject</button>
    </form>
</div>
{% endblock %}
