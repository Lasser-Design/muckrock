{% comment %}
Form Object
-----------
This form object takes two optional arguments:
* is_hidden (bool)
* button_text (string)

If the form is hidden, it is revealed by the CSS :target selector. There must be at least one button on the page containing the hidden form that targets #hidden-form. There must be at most one hidden form per page.
{% endcomment %}
<form action="" method="post" class="form" {% if is_hidden %}id="hidden-form"{% endif %}>
    {% csrf_token %}
    {% if form.non_field_errors %}
    <object class="failure panel">
    {{ form.non_field_errors }}
    </object>
    {% endif %}
    {% for field in form.hidden_fields %}
        {{ field }}
    {% endfor %}
    {% for field in form.visible_fields %}
        <fieldset class="{% if field.errors %}failure {% endif %}					{% if field.field.required %}required{% endif %}">
            <label for="{{ field.auto_id }}">{{ field.label}}</label>
            {{ field }}
            {% if field.help_text %}<p class="default"><small>{{ field.help_text }}</small></p>{% endif %}
            {% if field.errors %}<p class="failure"><small>{{ field.errors }}</small></p>{% endif %}
        </fieldset>
    {% endfor %}
    {% if button_text %}
    <input type="submit" name="submit" value="{{ button_text }}" class="primary button" />
    {% else %}
    <input type="submit" name="submit" value="Submit" class="primary button" />
    {% endif %}
    {% if is_hidden %}<a href="#" class="button">Cancel</a>{% endif %}
</object>