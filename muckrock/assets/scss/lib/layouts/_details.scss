/* Details */

.detail {

    @extend %detail;

    &.agency {
        aside dl { @extend %third; }
        aside dd + dt { margin-top: $base-margin; }
    }

    &.flatpage {
        h1 {
            font-weight: $font-weight-bold;
        }
        @include font-sizing(1.1, 1.2);
        max-width: 45em;
        ul { padding-left: $base-padding; }
    }

    &.jurisdiction {
        h3 { font-weight: normal; }
        h3 + table { margin-top: 0; }
        h3 + h3 { margin-top: 1.5em; }
    }

    &.news {
        @include outer-container;
        $article-body-width: 33em;

        .news-image {
            @extend %full;
            @include omega;
            margin-bottom: $base-margin;
            @include media($medium-layout) {
                margin-bottom: $base-margin*2;
            }
        }
        .news-article {
            @include row;
            @include span-columns(12);
            @include media($medium-layout) {
                @include span-columns(4);
                padding-right: $base-padding;
            }
            @include media($large-layout) {
                @include span-columns(8);
                @include shift(1);
            }
        }
        .news-aside {
            @include grid-columns(12, 2, 3);
        }

        .news-article-header, .news-article-body, .news-article-footer {
            max-width: $article-body-width;
        }

        .news-article-header {
            margin-bottom: $base-margin;
            border-bottom: $base-border-width solid $color-grey;
            @include media($medium-layout) {
                margin-bottom: 0;
            }
        }

        .news-article-title {
            margin-top: 0;
            font-size: 2.0625em;
            font-weight: $font-weight-bold;
            @include media($large-layout) {
                max-width: 150%;
            }
        }

        .news-article-kicker {
            margin: $base-margin/2 0;
            font-size: 1.4375em;
            font-weight: $font-weight-bold;
            line-height: 1.5em;
            @include media($large-layout) {
                max-width: 150%;
            }
        }

        .news-article-authors {
            font-size: 1em;
            font-weight: $font-weight-normal;
            margin-bottom: $base-margin;
        }

        .news-article-body {
            @include font-sizing(1, 1.2);
            @include media($medium-layout) {
                @include font-sizing(1.2, 1.4);
            }
            margin: $base-margin 0;
            padding-top: 0;
            p {
                margin-bottom: 1.4em;
            }
            ul { padding-left: $base-padding; }
            img, figure, .pullquote {
                max-width: 100%;
                @include media($medium-layout) {
                    max-width: 140%;
                }
            }
        }

        // Fixes for embedded content
        div[id^='viewer'] {
            max-width: 90%;
            margin: $base-margin auto;
            @include media($large-layout) {
                margin: $base-margin auto $base-margin 0;
            }

        }
        .iframe-container {
            position: relative;
            padding-bottom: 75%;
            height: 0;
            overflow: hidden;
            & > iframe {
                position: absolute;
                top:0;
                left: 0;
                width: 100%;
                height: 100%;
            }
        }
    }

    &.organization {
        .add-members, .members, .controls {
            @include row;
        }
        .add-members {
            @include row;
            margin-bottom: $base-margin;
            button {
                @extend %quarter;
                @include omega(n);
                margin-top: 0;
                padding: .5em 1em;
            }
            #id_add_members-wrapper {
                @extend %three-quarters;
                border: $base-border-width solid $color-grey;
                border-radius: $base-border-radius;
                background: white;
                cursor: text;
            }
            input.autocomplete {
                vertical-align: middle;
                margin: .25em;
                padding: .25em;
                border: none;
                border-radius: $base-border-radius;
                background: none;
            }
            .deck .hilight {
                margin: .25em;
                border-radius: $base-border-radius;
                padding: .25em;
                padding-right: .75em;
                background: $color-blue;
                color: $color-white;
            }
        }
        .members {
            display: table;
            margin: $base-margin 0;
            border-radius: 0;
            th {
                font-size: 1rem;
            }
            th:first-child, td:first-child {
                width: 5%;
            }
            th:last-child, th:last-child {
                width: 95%;
            }
        }
        .controls {
            @extend %controls;
            .user-controls, .org-controls {
                @extend %half;
            }
            .user-controls {
                text-align: left;
            }
            @include media($medium-layout){
                .user-controls + .org-controls {
                    text-align: right;
                }
            }
        }
    }

    &.profile {
        section.meta > header {
            h1 {
                @include font-sizing(3);
                margin-top: 0;
                font-weight: $font-weight-light;
            }
            dl { margin-top: $base-vertical-rhythm; }
        }
    }

    &.question {
        .messages-container {
            @include row;
        }
    }

    &.request {
        h3 { font-size: 1.25em; }
        .draft {
            @include row;
            button, .button {
                display: block;
                @extend %half;
            }
        }
        .status-badge {
            color: $color-black;
            border: 1px solid $color-grey;
            display: inline-block;
            margin-bottom: .75em;
            padding: .25em .75em;
            border-radius: 4px;
            font-weight: $font-weight-bold;

            @mixin colorize($status, $color, $color-dark) {
                &.#{$status} {
                    color: $color;
                    border-color: $color;
                }
            }
            @include colorize(success, $color-green, $color-green-dark);
            @include colorize(failure, $color-red, $color-red-dark);
            @include colorize(warning, $color-yellow, $color-yellow-dark);
            @include colorize(default, $color-grey, $color-black);
        }
        .status-form {
            display: none;
            font-size: 0.85em;
            background: none;
            border: none;
            button { margin-left: $base-vertical-rhythm/4; }
            p { margin-top: 0; }
        }
        .tabs {
            list-style-type: none;
            overflow: hidden;
            padding-left: $base-vertical-rhythm;
            border-bottom: $base-border-width solid $color-grey;
            input[type="radio"] { display: none; }
            label {
                display: block;
                float: left;
                padding: $base-vertical-rhythm/4 $base-vertical-rhythm/2;
                @extend %border;
                border-left: none;
                border-bottom: none;
                cursor: pointer;
                &:first-of-type {
                    border-top-left-radius: $base-border-radius;
                    border-left: $base-border-width solid $color-grey;
                }
                &:last-of-type {
                    border-top-right-radius: $base-border-radius;
                }
                &:hover {
                    color: $color-white;
                    background-color: $color-grey;
                }
                &.active {
                    color: $color-white;
                    background-color: $color-blue;
                    border-color: $color-blue;
                }
            }

        }
        .tab-section {
            display: none;
            &.active { display: block; }
        }
        .files {
            ul {
                list-style-type: none;
                padding-left: 0;
                @include row;
                li {
                    @extend %half;
                    margin-bottom: $base-vertical-rhythm/2;
                    border: $base-border-width solid $color-blue;
                    @extend %border-radius;
                    padding: $base-vertical-rhythm/2 $base-vertical-rhythm;
                    &.active {
                        background-color: $color-blue;
                        color: $color-white;
                        a { color: $color-white; }
                        .embed.modal { color: $color-black; }
                    }
                }
            }
            .viewer {
                position: relative;
                width: 100%;
                height: 66em;
                margin: $base-vertical-rhythm auto;
            }
        }
        .notes {
            .note {
                @include row;
                margin: $base-margin 0 0;
                padding: 0 0 $base-padding/2;
                border-bottom: $base-border-width solid $color-grey;
                .note-date {
                    @extend %quarter;
                    color: $color-grey;
                    text-align: right;
                }
                .note-body { @extend %three-quarters; }
            }

            .button {
                display: block;
                width: 10em;
                margin: 1.5em auto;
            }
        }
        .request.controls {
            position: relative;
            clear: both;
            .hidden-reply {
                display: block;
                max-width: 30em;
                margin: 0 auto;
                @include row;
                h1 {
                    @include font-sizing(1.5);
                    @extend %half;
                }
                h2 {
                    @include font-sizing(1.25);
                    @extend %half;
                    text-align: right;
                }
                textarea {
                    @extend %full;
                    height: 10em;
                    overflow-y: scroll;
                    resize: vertical;
                    margin-bottom: $base-margin/2;
                }
                .buttons {
                    @extend %full;
                    input, span { float: left; }
                }
            }
        }
    }
}
